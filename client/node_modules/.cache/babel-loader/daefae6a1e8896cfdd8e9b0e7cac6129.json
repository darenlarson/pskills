{"ast":null,"code":"import _classCallCheck from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/darenlarson/Code/pskills/client/src/App.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Route, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport LandingPage1 from \"./components/Landing/LandingPage1\";\nimport NavigationBar from \"./components/Navigation/NavigationBar\";\nimport Prisons from \"./components/Prisons/Prisons\";\nimport PrisonOverview from \"./components/Prisons/PrisonOverview\";\nimport Footer from \"./components/Footer/Footer\";\nimport Authentication from \"./components/Login/Authentication\";\nimport EmployerHOC from \"./components/Employer/EmployerHOC\";\nimport EditPrisoner from \"./components/Employer/EditPrisoner\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.getPrisons = function () {\n      axios.get(\"http://localhost:5000/api/prisons\").then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisons: res.data\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getPrisonInfo = function (id) {\n      console.log(\"getPrisonInfo() invoked\");\n      console.log(\"id: \".concat(id));\n      axios.get(\"http://localhost:5000/api/prisons/\".concat(id)).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisonInfo: {\n            id: res.data.id,\n            location: res.data.location,\n            name: res.data.name,\n            phoneNumber: res.data.phoneNumber\n          },\n          prisoners: res.data.prisoners\n        });\n\n        if (res.data.id) {\n          _this.setState({\n            prisonId: res.data.id\n          });\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getPrisonerInfo = function (id) {\n      console.log(\"getPrisonerInfo() invoked\");\n      console.log(\"id:\", id);\n      axios.get(\"http://localhost:5000/api/prisoners/\".concat(id)).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisonerId: res.data.id,\n          prisonerName: res.data.name,\n          prisonerAvailability: res.data.availability,\n          prisonerSkills: res.data.skills,\n          prisonerPicture: res.data.picture,\n          prisonerProfile: res.data.profile\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.addPrisoner = function (prisonerInfo) {\n      console.log(\"addPrisoner() invoked\");\n      console.log(prisonerInfo);\n      prisonerInfo.prisonId = _this.state.prisonInfo.id;\n      var token = localStorage.getItem(\"jwt\");\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.post(\"http://localhost:5000/api/prisoners\", prisonerInfo, requestOptions).then(function (res) {\n        console.log(res);\n\n        _this.getPrisonInfo(_this.state.prisonInfo.id);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.editPrisonerInfo = function (id, changes) {\n      console.log(\"editPrisonerInfo() invoked\");\n      var token = localStorage.getItem(\"jwt\");\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.put(\"http://localhost:5000/api/prisoners/\".concat(id), changes, requestOptions).then(function (res) {\n        console.log(res);\n\n        _this.getPrisonInfo(_this.state.prisonInfo.id);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.deletePrisoner = function (id) {\n      console.log(\"deletePrisoner() invoked\");\n      var token = localStorage.getItem(\"jwt\");\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.delete(\"http://localhost:5000/api/prisoners/\".concat(id), requestOptions).then(function (res) {\n        console.log(res);\n\n        _this.getPrisonInfo(_this.state.prisonInfo.id);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.registerUser = function (credentials) {\n      var endpoint = \"http://localhost:5000/api/users/register\";\n      axios.post(endpoint, credentials).then(function (res) {\n        _this.loginUser(credentials);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.loginUser = function (credentials) {\n      var loginEndpoint = \"http://localhost:5000/api/users/login\";\n      axios.post(loginEndpoint, credentials).then(function (res) {\n        localStorage.setItem(\"jwt\", res.data.token);\n        localStorage.setItem(\"userId\", res.data.id);\n\n        _this.props.history.push(\"/employer\");\n\n        _this.setState({\n          adminId: res.data.id\n        });\n\n        axios.get(\"http://localhost:5000/api/prisons/\".concat(res.data.id)).then(function (res) {\n          _this.setState({\n            prisonInfo: {\n              id: res.data.id,\n              location: res.data.location,\n              name: res.data.name,\n              phoneNumber: res.data.phoneNumber\n            },\n            prisoners: res.data.prisoners\n          });\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.createPrison = function (prisonInfo) {\n      console.log(\"createPrison() invoked\");\n      console.log(prisonInfo);\n      prisonInfo.id = _this.state.adminId;\n      var token = localStorage.getItem(\"jwt\");\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.post(\"http://localhost:5000/api/prisons/\", prisonInfo, requestOptions).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisonId: res.data[0]\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.state = {\n      prisons: [],\n      prisonInfo: {},\n      prisonId: null,\n      prisoners: [],\n      adminId: null,\n      prisonerId: null,\n      prisonerName: \"\",\n      prisonerAvailability: 0,\n      prisonerSkills: \"\",\n      prisonerPicture: \"\",\n      prisonerProfile: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"AppContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        component: NavigationBar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: LandingPage1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/prisons/\",\n        render: function render(props) {\n          return React.createElement(Prisons, Object.assign({}, props, {\n            getPrisons: _this2.getPrisons,\n            getPrisonInfo: _this2.getPrisonInfo,\n            prisons: _this2.state.prisons,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 239\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/prisons/:id\",\n        render: function render(props) {\n          return React.createElement(PrisonOverview, Object.assign({}, props, {\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 250\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render(props) {\n          return React.createElement(Authentication, Object.assign({}, props, {\n            loginUser: _this2.loginUser,\n            registerUser: _this2.registerUser,\n            prisonId: _this2.state.prisonId,\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            getPrisonInfo: _this2.getPrisonInfo,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/employer\",\n        render: function render(props) {\n          return React.createElement(EmployerHOC, Object.assign({}, props, {\n            prisonId: _this2.state.prisonId,\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            getPrisonInfo: _this2.getPrisonInfo,\n            addPrisoner: _this2.addPrisoner,\n            createPrison: _this2.createPrison,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 277\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/employer/prisoner/edit/:id\",\n        render: function render(props) {\n          return React.createElement(EditPrisoner, Object.assign({}, props, {\n            getPrisonerInfo: _this2.getPrisonerInfo,\n            editPrisonerInfo: _this2.editPrisonerInfo,\n            deletePrisoner: _this2.deletePrisoner // getPrisonInfo={this.getPrisonInfo}\n            // prisonId={this.state.prisonId}\n            ,\n            prisonerId: _this2.state.prisonerId,\n            prisonerName: _this2.state.prisonerName,\n            prisonerAvailability: _this2.state.prisonerAvailability,\n            prisonerSkills: _this2.state.prisonerSkills,\n            prisonerPicture: _this2.state.prisonerPicture,\n            prisonerProfile: _this2.state.prisonerProfile,\n            prisoners: _this2.state.prisoners,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 292\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        component: Footer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/darenlarson/Code/pskills/client/src/App.js"],"names":["React","axios","Route","withRouter","LandingPage1","NavigationBar","Prisons","PrisonOverview","Footer","Authentication","EmployerHOC","EditPrisoner","App","props","getPrisons","get","then","res","console","log","setState","prisons","data","catch","err","getPrisonInfo","id","prisonInfo","location","name","phoneNumber","prisoners","prisonId","getPrisonerInfo","prisonerId","prisonerName","prisonerAvailability","availability","prisonerSkills","skills","prisonerPicture","picture","prisonerProfile","profile","addPrisoner","prisonerInfo","state","token","localStorage","getItem","requestOptions","headers","authorization","post","editPrisonerInfo","changes","put","deletePrisoner","delete","registerUser","credentials","endpoint","loginUser","loginEndpoint","setItem","history","push","adminId","createPrison","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { Route, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport LandingPage1 from \"./components/Landing/LandingPage1\";\nimport NavigationBar from \"./components/Navigation/NavigationBar\";\nimport Prisons from \"./components/Prisons/Prisons\";\nimport PrisonOverview from \"./components/Prisons/PrisonOverview\";\nimport Footer from \"./components/Footer/Footer\";\nimport Authentication from \"./components/Login/Authentication\";\nimport EmployerHOC from \"./components/Employer/EmployerHOC\";\nimport EditPrisoner from \"./components/Employer/EditPrisoner\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prisons: [],\n      prisonInfo: {},\n      prisonId: null,\n      prisoners: [],\n      adminId: null,\n      prisonerId: null,\n      prisonerName: \"\",\n      prisonerAvailability: 0,\n      prisonerSkills: \"\",\n      prisonerPicture: \"\",\n      prisonerProfile: \"\"\n    };\n  }\n\n  getPrisons = () => {\n    axios\n      .get(\"http://localhost:5000/api/prisons\")\n      .then(res => {\n        console.log(res);\n        this.setState({ prisons: res.data });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getPrisonInfo = id => {\n    console.log(\"getPrisonInfo() invoked\");\n    console.log(`id: ${id}`);\n    axios\n      .get(`http://localhost:5000/api/prisons/${id}`)\n      .then(res => {\n        console.log(res);\n\n        this.setState({\n          prisonInfo: {\n            id: res.data.id,\n            location: res.data.location,\n            name: res.data.name,\n            phoneNumber: res.data.phoneNumber\n          },\n          prisoners: res.data.prisoners,\n        });\n\n        if (res.data.id) {\n          this.setState({\n            prisonId: res.data.id\n          })\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getPrisonerInfo = id => {\n    console.log(\"getPrisonerInfo() invoked\");\n    console.log(\"id:\", id);\n\n    axios\n      .get(`http://localhost:5000/api/prisoners/${id}`)\n      .then(res => {\n        console.log(res);\n\n        this.setState({\n          prisonerId: res.data.id,\n          prisonerName: res.data.name,\n          prisonerAvailability: res.data.availability,\n          prisonerSkills: res.data.skills,\n          prisonerPicture: res.data.picture,\n          prisonerProfile: res.data.profile\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  addPrisoner = prisonerInfo => {\n    console.log(\"addPrisoner() invoked\");\n    console.log(prisonerInfo);\n\n    prisonerInfo.prisonId = this.state.prisonInfo.id;\n\n    const token = localStorage.getItem(\"jwt\");\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .post(`http://localhost:5000/api/prisoners`, prisonerInfo, requestOptions)\n      .then(res => {\n        console.log(res);\n        this.getPrisonInfo(this.state.prisonInfo.id);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  editPrisonerInfo = (id, changes) => {\n    console.log(\"editPrisonerInfo() invoked\");\n\n    const token = localStorage.getItem(\"jwt\");\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .put(`http://localhost:5000/api/prisoners/${id}`, changes, requestOptions)\n      .then(res => {\n        console.log(res);\n        this.getPrisonInfo(this.state.prisonInfo.id);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  deletePrisoner = id => {\n    console.log(\"deletePrisoner() invoked\");\n\n    const token = localStorage.getItem(\"jwt\");\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .delete(`http://localhost:5000/api/prisoners/${id}`, requestOptions)\n      .then(res => {\n        console.log(res);\n        this.getPrisonInfo(this.state.prisonInfo.id);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  registerUser = credentials => {\n    const endpoint = \"http://localhost:5000/api/users/register\";\n\n    axios\n      .post(endpoint, credentials)\n      .then(res => {\n        this.loginUser(credentials);\n      })\n      .catch(err => console.log(err));\n  };\n\n  loginUser = credentials => {\n    const loginEndpoint = \"http://localhost:5000/api/users/login\";\n\n    axios\n      .post(loginEndpoint, credentials)\n      .then(res => {\n        localStorage.setItem(\"jwt\", res.data.token);\n        localStorage.setItem(\"userId\", res.data.id);\n        this.props.history.push(\"/employer\");\n        this.setState({ adminId: res.data.id });\n\n        axios\n          .get(`http://localhost:5000/api/prisons/${res.data.id}`)\n          .then(res => {\n            this.setState({\n              prisonInfo: {\n                id: res.data.id,\n                location: res.data.location,\n                name: res.data.name,\n                phoneNumber: res.data.phoneNumber\n              },\n              prisoners: res.data.prisoners\n            });\n          })\n          .catch(err => {\n            console.log(err);\n          });\n      })\n      .catch(err => console.log(err));\n  };\n\n  createPrison = prisonInfo => {\n    console.log(\"createPrison() invoked\");\n    console.log(prisonInfo);\n\n    prisonInfo.id = this.state.adminId\n\n    const token = localStorage.getItem(\"jwt\");\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .post(`http://localhost:5000/api/prisons/`, prisonInfo, requestOptions)\n      .then(res => {\n        console.log(res);\n        this.setState({\n          prisonId: res.data[0]\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"AppContainer\">\n        <Route path=\"/\" component={NavigationBar} />\n        <Route exact path=\"/\" component={LandingPage1} />\n        <Route\n          exact\n          path=\"/prisons/\"\n          render={props => (\n            <Prisons\n              {...props}\n              getPrisons={this.getPrisons}\n              getPrisonInfo={this.getPrisonInfo}\n              prisons={this.state.prisons}\n            />\n          )}\n        />\n        <Route\n          path=\"/prisons/:id\"\n          render={props => (\n            <PrisonOverview\n              {...props}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/login\"\n          render={props => (\n            <Authentication\n              {...props}\n              loginUser={this.loginUser}\n              registerUser={this.registerUser}\n              prisonId={this.state.prisonId}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n              getPrisonInfo={this.getPrisonInfo}\n            />\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/employer\"\n          render={props => (\n            <EmployerHOC\n              {...props}\n              prisonId={this.state.prisonId}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n              getPrisonInfo={this.getPrisonInfo}\n              addPrisoner={this.addPrisoner}\n              createPrison={this.createPrison}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/employer/prisoner/edit/:id\"\n          render={props => (\n            <EditPrisoner\n              {...props}\n              getPrisonerInfo={this.getPrisonerInfo}\n              editPrisonerInfo={this.editPrisonerInfo}\n              deletePrisoner={this.deletePrisoner}\n              // getPrisonInfo={this.getPrisonInfo}\n              // prisonId={this.state.prisonId}\n              prisonerId={this.state.prisonerId}\n              prisonerName={this.state.prisonerName}\n              prisonerAvailability={this.state.prisonerAvailability}\n              prisonerSkills={this.state.prisonerSkills}\n              prisonerPicture={this.state.prisonerPicture}\n              prisonerProfile={this.state.prisonerProfile}\n              prisoners={this.state.prisoners}\n            />\n          )}\n        />\n\n        <Route path=\"/\" component={Footer} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}