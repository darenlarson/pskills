{"ast":null,"code":"import _classCallCheck from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/darenlarson/Code/pskills/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/darenlarson/Code/pskills/client/src/App.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Route, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport LandingPage1 from './components/Landing/LandingPage1';\nimport NavigationBar from \"./components/Navigation/NavigationBar\";\nimport Prisons from \"./components/Prisons/Prisons\";\nimport PrisonOverview from \"./components/Prisons/PrisonOverview\";\nimport Footer from \"./components/Footer/Footer\";\nimport Authentication from './components/Login/Authentication';\nimport EmployerHOC from \"./components/Employer/EmployerHOC\";\nimport EditPrisoner from \"./components/Employer/EditPrisoner\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.getPrisons = function () {\n      axios.get(\"http://localhost:5000/api/prisons\").then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisons: res.data\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getPrisonInfo = function (id) {\n      console.log('getPrisonInfo() invoked');\n      console.log(\"id: \".concat(id));\n      axios.get(\"http://localhost:5000/api/prisons/\".concat(id)).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisonInfo: {\n            id: res.data.id,\n            location: res.data.location,\n            name: res.data.name,\n            phoneNumber: res.data.phoneNumber\n          },\n          prisoners: res.data.prisoners\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getPrisonerInfo = function (id) {\n      console.log('getPrisonerInfo() invoked');\n      console.log('id:', id);\n      axios.get(\"http://localhost:5000/api/prisoners/\".concat(id)).then(function (res) {\n        console.log(res);\n\n        _this.setState({\n          prisonerId: res.data.id,\n          prisonerName: res.data.name,\n          prisonerAvailability: res.data.availability,\n          prisonerSkills: res.data.skills,\n          prisonerPicture: res.data.picture,\n          prisonerProfile: res.data.profile\n        });\n      }).catch();\n    };\n\n    _this.editPrisonerInfo = function (id, changes) {\n      console.log('editPrisonerInfo() invoked');\n      var token = localStorage.getItem('jwt');\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.put(\"http://localhost:5000/api/prisoners/\".concat(id), changes, requestOptions).then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.deletePrisoner = function (id) {\n      console.log('deletePrisoner() invoked');\n      var token = localStorage.getItem('jwt');\n      var requestOptions = {\n        headers: {\n          authorization: token\n        }\n      };\n      axios.delete(\"http://localhost:5000/api/prisoners/\".concat(id), requestOptions).then(function (res) {\n        console.log(res);\n\n        _this.getPrisonInfo(_this.state.prisonId);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.registerUser = function (credentials) {\n      var endpoint = \"http://localhost:5000/api/users/register\";\n      axios.post(endpoint, credentials).then(function (res) {\n        _this.loginUser(credentials);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.loginUser = function (credentials) {\n      var loginEndpoint = \"http://localhost:5000/api/users/login\";\n      axios.post(loginEndpoint, credentials).then(function (res) {\n        localStorage.setItem('jwt', res.data.token);\n        localStorage.setItem('userId', res.data.id);\n\n        _this.props.history.push('/employer');\n\n        _this.setState({\n          adminId: res.data.id\n        }); // this.getPrisonInfo(res.data.id)\n\n\n        axios.get(\"http://localhost:5000/api/prisons/\".concat(res.data.id)).then(function (res) {\n          _this.setState({\n            prisonInfo: {\n              id: res.data.id,\n              location: res.data.location,\n              name: res.data.name,\n              phoneNumber: res.data.phoneNumber\n            },\n            prisoners: res.data.prisoners\n          });\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.createPrison = function () {};\n\n    _this.state = {\n      prisons: [],\n      prisonInfo: {},\n      prisoners: [],\n      adminId: null,\n      prisonId: null,\n      prisonerId: null,\n      prisonerName: '',\n      prisonerAvailability: 0,\n      prisonerSkills: '',\n      prisonerPicture: '',\n      prisonerProfile: ''\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"AppContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        component: NavigationBar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: LandingPage1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/prisons/\",\n        render: function render(props) {\n          return React.createElement(Prisons, Object.assign({}, props, {\n            getPrisons: _this2.getPrisons,\n            getPrisonInfo: _this2.getPrisonInfo,\n            prisons: _this2.state.prisons,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/prisons/:id\",\n        render: function render(props) {\n          return React.createElement(PrisonOverview, Object.assign({}, props, {\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render(props) {\n          return React.createElement(Authentication, Object.assign({}, props, {\n            loginUser: _this2.loginUser,\n            registerUser: _this2.registerUser,\n            prisonId: _this2.state.prisonId,\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            getPrisonInfo: _this2.getPrisonInfo,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/employer\",\n        render: function render(props) {\n          return React.createElement(EmployerHOC, Object.assign({}, props, {\n            prisonId: _this2.state.prisonId,\n            prisonInfo: _this2.state.prisonInfo,\n            prisoners: _this2.state.prisoners,\n            getPrisonInfo: _this2.getPrisonInfo,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 223\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/employer/prisoner/edit/:id\",\n        render: function render(props) {\n          return React.createElement(EditPrisoner, Object.assign({}, props, {\n            getPrisonerInfo: _this2.getPrisonerInfo,\n            editPrisonerInfo: _this2.editPrisonerInfo,\n            deletePrisoner: _this2.deletePrisoner // getPrisonInfo={this.getPrisonInfo}\n            // prisonId={this.state.prisonId}\n            ,\n            prisonerId: _this2.state.prisonerId,\n            prisonerName: _this2.state.prisonerName,\n            prisonerAvailability: _this2.state.prisonerAvailability,\n            prisonerSkills: _this2.state.prisonerSkills,\n            prisonerPicture: _this2.state.prisonerPicture,\n            prisonerProfile: _this2.state.prisonerProfile,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        component: Footer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\n;\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/darenlarson/Code/pskills/client/src/App.js"],"names":["React","axios","Route","withRouter","LandingPage1","NavigationBar","Prisons","PrisonOverview","Footer","Authentication","EmployerHOC","EditPrisoner","App","props","getPrisons","get","then","res","console","log","setState","prisons","data","catch","err","getPrisonInfo","id","prisonInfo","location","name","phoneNumber","prisoners","getPrisonerInfo","prisonerId","prisonerName","prisonerAvailability","availability","prisonerSkills","skills","prisonerPicture","picture","prisonerProfile","profile","editPrisonerInfo","changes","token","localStorage","getItem","requestOptions","headers","authorization","put","deletePrisoner","delete","state","prisonId","registerUser","credentials","endpoint","post","loginUser","loginEndpoint","setItem","history","push","adminId","createPrison","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { Route, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport LandingPage1 from './components/Landing/LandingPage1';\nimport NavigationBar from \"./components/Navigation/NavigationBar\";\nimport Prisons from \"./components/Prisons/Prisons\";\nimport PrisonOverview from \"./components/Prisons/PrisonOverview\";\nimport Footer from \"./components/Footer/Footer\";\nimport Authentication from './components/Login/Authentication';\nimport EmployerHOC from \"./components/Employer/EmployerHOC\";\nimport EditPrisoner from \"./components/Employer/EditPrisoner\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prisons: [],\n      prisonInfo: {},\n      prisoners: [],\n      adminId: null,\n      prisonId: null,\n      prisonerId: null,\n      prisonerName: '',\n      prisonerAvailability: 0,\n      prisonerSkills: '',\n      prisonerPicture: '',\n      prisonerProfile: '',\n    };\n  }\n\n  getPrisons = () => {\n    axios\n      .get(\"http://localhost:5000/api/prisons\")\n      .then(res => {\n        console.log(res);\n        this.setState({ prisons: res.data });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getPrisonInfo = id => {\n    console.log('getPrisonInfo() invoked')\n    console.log(`id: ${id}`)\n    axios\n      .get(`http://localhost:5000/api/prisons/${id}`)\n      .then(res => {\n        console.log(res);\n\n        this.setState({\n          prisonInfo: {\n            id: res.data.id,\n            location: res.data.location,\n            name: res.data.name,\n            phoneNumber: res.data.phoneNumber,\n          },\n          prisoners: res.data.prisoners,\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getPrisonerInfo = id => {\n    console.log('getPrisonerInfo() invoked')\n    console.log('id:', id)\n\n    axios\n      .get(`http://localhost:5000/api/prisoners/${id}`)\n      .then(res => {\n        console.log(res);\n\n        this.setState({\n          prisonerId: res.data.id,\n          prisonerName: res.data.name,\n          prisonerAvailability: res.data.availability,\n          prisonerSkills: res.data.skills,\n          prisonerPicture: res.data.picture,\n          prisonerProfile: res.data.profile,\n        })\n      })\n      .catch();\n  };\n\n  editPrisonerInfo = (id, changes) => {\n    console.log('editPrisonerInfo() invoked');\n\n    const token = localStorage.getItem('jwt');\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .put(`http://localhost:5000/api/prisoners/${id}`, changes, requestOptions)\n      .then(res => {\n        console.log(res);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  deletePrisoner = id => {\n    console.log('deletePrisoner() invoked');\n\n    const token = localStorage.getItem('jwt');\n    const requestOptions = {\n      headers: {\n        authorization: token\n      }\n    };\n\n    axios\n      .delete(`http://localhost:5000/api/prisoners/${id}`, requestOptions)\n      .then(res => {\n        console.log(res)\n        this.getPrisonInfo(this.state.prisonId)\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }\n\n  registerUser = credentials => {\n    const endpoint = \"http://localhost:5000/api/users/register\";\n\n    axios\n      .post(endpoint, credentials)\n      .then(res => {\n        this.loginUser(credentials)\n      })\n      .catch(err => console.log(err));\n\n  };\n\n  loginUser = credentials => {\n    const loginEndpoint = \"http://localhost:5000/api/users/login\";\n\n    axios\n          .post(loginEndpoint, credentials)\n          .then(res => {\n            localStorage.setItem('jwt', res.data.token);\n            localStorage.setItem('userId', res.data.id)\n            this.props.history.push('/employer')\n            this.setState({ adminId: res.data.id})\n            // this.getPrisonInfo(res.data.id)\n            axios\n              .get(`http://localhost:5000/api/prisons/${res.data.id}`)\n              .then(res => {\n                this.setState({\n                  prisonInfo: {\n                    id: res.data.id,\n                    location: res.data.location,\n                    name: res.data.name,\n                    phoneNumber: res.data.phoneNumber,\n                  },\n                  prisoners: res.data.prisoners,\n                })\n              })\n              .catch(err => {\n                console.log(err);\n              });\n          })\n          .catch(err => console.log(err));\n  };\n\n  createPrison = () => {\n\n  };\n\n  render() {\n    return (\n      <div className=\"AppContainer\">\n        <Route path=\"/\" component={NavigationBar} />\n        <Route exact path=\"/\" component={LandingPage1} />\n        <Route\n          exact\n          path=\"/prisons/\"\n          render={props => (\n            <Prisons\n              {...props}\n              getPrisons={this.getPrisons}\n              getPrisonInfo={this.getPrisonInfo}\n              prisons={this.state.prisons}\n            />\n          )}\n        />\n        <Route\n          path=\"/prisons/:id\"\n          render={props => (\n            <PrisonOverview\n              {...props}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/login\"\n          render={props => (\n            <Authentication\n              {...props}\n              loginUser={this.loginUser}\n              registerUser={this.registerUser}\n              prisonId={this.state.prisonId}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n              getPrisonInfo={this.getPrisonInfo}\n            />\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/employer\"\n          render={props => (\n            <EmployerHOC\n              {...props}\n              prisonId={this.state.prisonId}\n              prisonInfo={this.state.prisonInfo}\n              prisoners={this.state.prisoners}\n              getPrisonInfo={this.getPrisonInfo}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/employer/prisoner/edit/:id\"\n          render={props => (\n            <EditPrisoner\n              {...props}\n              getPrisonerInfo={this.getPrisonerInfo}\n              editPrisonerInfo={this.editPrisonerInfo}\n              deletePrisoner={this.deletePrisoner}\n              // getPrisonInfo={this.getPrisonInfo}\n              // prisonId={this.state.prisonId}\n              prisonerId={this.state.prisonerId}\n              prisonerName={this.state.prisonerName}\n              prisonerAvailability={this.state.prisonerAvailability}\n              prisonerSkills={this.state.prisonerSkills}\n              prisonerPicture={this.state.prisonerPicture}\n              prisonerProfile={this.state.prisonerProfile}\n            />\n          )}\n        />\n\n\n        <Route path=\"/\" component={Footer} />\n      </div>\n    )\n  };\n};\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}